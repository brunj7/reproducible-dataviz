<!DOCTYPE html>
<html>
  <head>
    <title>Reproducible Data Visualization</title>
    <meta charset="utf-8">
    <meta name="author" content="Julien Brun and Lauren Hallett" />
    <link rel="stylesheet" href="my-theme.css" type="text/css" />
    <link rel="stylesheet" href="libs/remark-css/default-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Reproducible Data Visualization
## with <code>Rmarkdown</code> and <code>ggplot2</code>
### Julien Brun and Lauren Hallett
### LTER ASM, 2018-10-01

---





background-image: url(https://lternet.edu/wp-content/uploads/2018/02/LTER-network-horizontal.png)
background-position: center
background-size: contain 
class: center
## _please close your laptop_
---


# Brainstorming

.xlarge[
- What is **Reproducible Science** and why should we care?

- What could I do to make my science more reproducible ?

- How do you use data visualization ?
]

---

# Workshop 

.xlarge[
- Please speak up: **questions**,  **own tips**!!

- Use your **sticky notes** to tell us _how you are doing_
]

--
.xlarge[
- Keep it fun!
&lt;img src="images/stickynotes.png", align="right", width="60%" /&gt;
]

---
class: inverse, center, middle

# Let's do it !!

## _please open your laptop_

---
background-image: url(images/hex-rmarkdown.png)
background-position: center
background-size: contain

---
# Workshop material

.xlarge[

http://bit.ly/ASM18_DataViz

]

---

&lt;img align="right" src="images/hex-rmarkdown.png" width="15%" /&gt;

## Why R Markdown can help 

.large[
- Combine **code** and **documentation** in **one** document/file  
_=&gt; Promote literate programming_

- Help to generate compelling documents  
_=&gt; reports, journal articles, presentations, ..._

- Easy to **share** through various formats  
_websites, blogs, dashboards, interactive visualizations_

- Can even let you run other languages  
_Python, bash, SQL, ..._

- Plain text!
]


---

&lt;img align="right" src="images/hex-rmarkdown.png" width="15%"&gt;

## What can you do with R Markdown ?

.large[
- Document extensively your analysis

- Share results (figures and tables)

- Let others execute and modify your code

- Create interactive documents

- Create websites and blogs

- Write journal articles and books
]

--
.large[
- Make presentations like this one!!
]

---

## R Markdown has a dynamic community !!

&lt;img align="Left" src="images/rmarkdown-radix.png" width="50%" alt="radix"&gt;
&lt;img align="right" src="images/rmarkdown_tips.png" width="50%" alt="comment"&gt;

---

### Create our First R Markdown Document

- From `Rstudio` create a new R Markdown document:  
`File -&gt; New File -&gt; R Markdown`

- Keep the default options and fill up the `Title` and `Author` fields

.center[&lt;img src="images/create-rmarkdown.png"  alt="New R Markdown" height="320" /&gt;]

.footnote[
_Note: In this workshop we will use the [RStudio IDE](https://www.rstudio.com/products/rstudio/), but you do not have to !_
]

---

## Create our First R Markdown Document

.xlarge[

- Click the `Knit` button to render the document
]
&lt;br&gt;

.center[![](images/knit-button.png)]

.xlarge[note you could you enter this command at the R console  
`rmarkdown::render("rmkdown1.Rmd")`

---
class: inverse, center, middle

# How does this work ?!

---

## R Markdown Document Structure

&lt;img align="right" src="images/rmarkdown-doc-structure.png" width="40%" /&gt;

.pull-left[.large[
3 basic components 
  - **Metadata**  
  _(`YAML` Ain't Markup Language)_
  
  - **Text** for documentation  
  _(`markdown` + other few tricks)_
  
  - **Code (chunks)** with your analysis 
  _(`R` and friends)_
]]

---

&lt;img align="right" src="images/markdown-logo.png" width="20%" /&gt;

# Markdown

.large[
`Markdown` is a simple (read easy to use) **text-based markup** for creating easy to read documents to be converted to `HTML`, `PDF`, `docx` and other formats. 

Document styles can be customized with `HTML/CSS` and math notation can be included using `LaTeX` or `mathjax`. 
]

--
.large[
```
$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$
```
`\(\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i\)`
]

&lt;br&gt;

.footnote[
_From: [RopenSci reproducibility guide](http://ropensci.github.io/reproducibility-guide/sections/tools/)_
]

---

## the **R** flavor

.large[
`R Markdown`: An _enhanced_ flavor of `Markdown` that recognizes _**`R` code chunks**_, which allows the embedding of R directly into a Markdown document to create dynamic and reproducible documents. 
]
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

.footnote[
_From: [RopenSci reproducibility guide](http://ropensci.github.io/reproducibility-guide/sections/tools/)_
]


---

# Chunk options - What to show 

- **eval**: if `eval = FALSE` code chunk will not be evaluated when knitted 

- **warning**, **message**, and **error**: will hide warnings, messages, and errors in the output document when set to `FALSE`.   
Note that these messages will be shown in the R console

- **include**: When `include = FALSE`, this whole code chunk is excluded in the output document  
Note: equivalent of `echo = FALSE`, `results = 'hide'`, `warning = FALSE`, and `message = FALSE`

- **echo**: Whether to echo the source code in the output document (useful to hide code generating plots)

- **results**: When set to 'hide', text output will be hidden; when set to 'asis', text output is written “as-is” with no rendering

---

# Chunk options - Figures 

- **fig.width** and **fig.height**: The (graphical device) size of R plots in inches. R plots in code chunks are first recorded via a graphical device in knitr, and then written out to files. 

- **out.width** and **out.height**: The output size of R plots in the output document. These options may scale images. You can use percentages, e.g., out.width = '80%' means 80% of the page width.

- **fig.align**: The alignment of plots. It can be 'left', 'center', or 'right'.

- **dev**: The graphical device to record R plots. Typically it is 'pdf' for LaTeX output, and 'png' for HTML output, but you can certainly use other devices, such as 'svg' or 'jpeg'.

- **fig.cap**: The figure caption

---
class: inverse, center, middle

# One more thing...

---

# Relative Paths

.large[

- RStudio Projects automatically set your working directory to the top / project folder

- When you knit a R Markdown document, the paths to external files (data, images, ...) are **relative to the document**

&lt;br&gt;
**_=&gt; If you R Markdown document is in a sub-directory,  relative paths are different_**

]


---
background-image: url(images/wd.png)
background-position: center
background-size: contain

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
.footnote[
_source: https://isteves.github.io/paris/rladies.html_
]
---
class: inverse, center, middle

# One step towards reproducibility...

---

## Data

.large[
- (Files) management
- Format
- Access
- Preservation
]

--

## Software / Code 

.large[
- Script everything
- Use open source
- Track changes - version control
- Comment your code well
- Share your code 
]
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
